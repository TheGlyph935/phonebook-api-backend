(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{10:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),s=t(19),a=t.n(s),o=t(20),u=t(3),i=(t(10),t(0)),b=function(e){var n=e.addPerson,t=e.handleChange,c=e.newName,r=e.newNumber,s=e.handleNumberChange;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Add Person"}),Object(i.jsxs)("form",{onSubmit:n,className:"personsForm",children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{onChange:t,placeholder:c}),Object(i.jsxs)("div",{children:["number:"," ",Object(i.jsx)("input",{placeholder:r,onChange:s})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{className:"form-buttons",type:"submit",children:"Add"})})]})]})},l=t(5),h=t.n(l),m="https://salty-cove-36521.herokuapp.com/api/persons",d=function(e){return h.a.delete("".concat(m,"/").concat(e))},j=function(){return h.a.get(m)},f=function(e){return h.a.post(m,e)},O=function(e,n){return h.a.put("".concat(m,"/").concat(e),n)},v=function(e){var n=e.person,t=e.persons,c=e.setPersons,r=e.setSucessMessage,s=n.id;return Object(i.jsxs)(i.Fragment,{children:[n.name," ",n.number," ",Object(i.jsx)("button",{className:"delete-button",onClick:function(){if(window.confirm("Are you sure you want to delete ".concat(n.name,"?"))){d(s).then((function(e){r("".concat(n.name," has been succesfully deleted.")),setTimeout((function(){r(null)}),4e3)}));var e=t.filter((function(e){return e.id!==s}));c(e)}},children:"Delete"})]})},p=function(e){var n=e.showPeople,t=e.persons,c=e.setPersons,r=(e.sucess,e.setSucessMessage);return Object(i.jsx)("div",{children:n.map((function(e,s){return Object(i.jsx)("p",{children:Object(i.jsx)(v,{setSucessMessage:r,persons:t,setPersons:c,person:e,showPeople:n})},s)}))})},g=function(e){var n=e.filter,t=e.setFilter,c=e.checked,r=e.setChecked;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"title",children:"Phonebook"}),Object(i.jsx)("h2",{children:"Filter"}),Object(i.jsxs)("form",{children:["Filter (name): ",Object(i.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}}),Object(i.jsx)("br",{}),Object(i.jsx)("label",{htmlFor:"showFilter",children:"Activate filter"}),Object(i.jsx)("input",{id:"showFilter",value:c,type:"checkbox",onChange:function(e){r(e.target.checked)}})]})]})},x=function(e){var n=e.change,t=e.setChange,c=e.handleNameChange,r=e.changeNumber,s=e.setChangeNumber;return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{className:"change-title",children:"Change/Edit Contact"}),Object(i.jsxs)("form",{onSubmit:c,children:["Person to Change: ",Object(i.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}}),Object(i.jsx)("br",{}),"New Number: ",Object(i.jsx)("input",{value:r,onChange:function(e){s(e.target.value)}}),Object(i.jsx)("input",{className:"form-buttons",type:"submit",value:"Submit"})]})]})},w=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"error",children:n})},C=function(e){var n=e.sucess;return null===n?null:Object(i.jsx)("div",{className:"sucess",children:n})},N=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],s=Object(c.useState)("Enter name"),a=Object(u.a)(s,2),l=a[0],h=a[1],m=Object(c.useState)("Enter number-number"),d=Object(u.a)(m,2),v=d[0],N=d[1],k=Object(c.useState)(""),S=Object(u.a)(k,2),y=S[0],P=S[1],T=Object(c.useState)(!1),F=Object(u.a)(T,2),E=F[0],M=F[1],A=Object(c.useState)(""),D=Object(u.a)(A,2),J=D[0],B=D[1],I=Object(c.useState)(""),q=Object(u.a)(I,2),z=q[0],G=q[1],H=Object(c.useState)(null),K=Object(u.a)(H,2),L=K[0],Q=K[1],R=Object(c.useState)(null),U=Object(u.a)(R,2),V=U[0],W=U[1];Object(c.useEffect)((function(){j().then((function(e){r(e.data)}))}),[]);var X=""===y||!1===E?t:t.filter((function(e){return e.name.includes(y)}));return Object(i.jsxs)("div",{children:[Object(i.jsx)(g,{checked:E,setChecked:M,filter:y,setFilter:P}),Object(i.jsx)(w,{message:L}),Object(i.jsx)(C,{sucess:V}),Object(i.jsx)(b,{addPerson:function(e){e.preventDefault();for(var n=t.concat({name:l,number:v}),c=function(e){if(t[e].name===l||t[e].number===v)return t[e].name===l?window.confirm("".concat(t[e].name," is alredy in the numberbook, would you like to replace his number number?"))&&O(t[e].id,{name:l,number:v}).catch((function(n){Q("".concat(t[e].name," was already removed or is non existent.")),setTimeout((function(){Q(null)}),5e3)})).then((function(n){r(t.map((function(c){return c.id!==t[e].id?c:n.data}))),setTimeout((function(){window.alert("".concat(l,"'s number number has been updated to ").concat(v,"."))}),500),h(""),N("")})):t[e].number===v&&window.alert("This number number already belongs to somebody else"),{v:void 0}},s=0;s<t.length;s++){var a=c(s);if("object"===typeof a)return a.v}f({name:l,number:v}).then((function(e){r(t.concat(e.data)),h(""),W("".concat(l," has been added.")),setTimeout((function(){W(null)}),4e3)})),r(n),N(""),N("")},handleChange:function(e){h(e.target.value)},newName:l,newNumber:v,handleNumberChange:function(e){N(e.target.value)}}),Object(i.jsx)(p,{setSucessMessage:W,persons:t,setPersons:r,showPeople:X}),Object(i.jsx)(x,{changeNumbner:z,setChangeNumber:G,handleNameChange:function(e){if(e.preventDefault(),!0!==E){for(var n={},c=Object(o.a)(t),s=!0,a=0;a<t.length;a++)if(t[a].number===z&&J!==t[a].name)return window.alert("This number number belongs to another person, "+t[a].name),void(s=!1);if(s){for(var u=function(e){return t[e].name===J&&t[e].number!==z?(n={name:J,number:z},s=e,c[e]=n,O(t[e].id,n).then((function(n){r(t.map((function(c){return c.id!==t[e].id?c:n.data}))),setTimeout((function(){window.alert("".concat(J,"'s number has been changed to ").concat(z))}),500),B(""),G("")})).catch((function(e){Q("".concat(J," has been removed from server in another page. Please refresh.")),setTimeout((function(){Q(null)}),4e3)})),{v:void 0}):t[e].number===z&&J!==t[e].name?(s=e,window.alert("This number number belongs to another person, "+t[e].name),{v:void 0}):void(s=e)},i=0;i<t.length;i++){var b=u(i);if("object"===typeof b)return b.v}var l=J+" isn't in numberbook, or the number is the same.";!0!==s&&!1!==s&&(l=t[s].name===J?"The number number is the same":J+" isn't in the numberbook"),Q(l),setTimeout((function(){Q(null)}),4e3)}}else window.alert("The filter must be turned off, try again.")},change:J,setChange:B})]})};a.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(N,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.47ba6cb3.chunk.js.map